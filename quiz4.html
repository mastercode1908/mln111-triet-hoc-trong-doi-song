<!DOCTYPE html>
<html lang="vi" class="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz 4: Hình thái kinh tế - xã hội | PhiloMap</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Noto+Sans:wght@400;500;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#308ce8",
                        "primary-dark": "#1a6bb8",
                        "background-light": "#f8f9fa",
                        "background-dark": "#111921",
                        "success": "#10b981",
                        "error": "#ef4444",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"],
                        "serif": ["Lora", "serif"],
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                    }
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Lexend', sans-serif;
        }

        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        .material-symbols-outlined.filled {
            font-variation-settings: 'FILL' 1;
        }

        /* Custom Radio Button Styling */
        input[type="radio"]:checked+div {
            border-color: #308ce8;
            background-color: #eff6ff;
        }

        input[type="radio"]:checked+div .radio-circle {
            background-color: #308ce8;
            border-color: #308ce8;
        }

        input[type="radio"]:checked+div .radio-circle::after {
            opacity: 1;
            transform: scale(1);
        }

        /* Quiz States */
        .correct-answer {
            border-color: #10b981 !important;
            background-color: #ecfdf5 !important;
        }

        .wrong-answer {
            border-color: #ef4444 !important;
            background-color: #fef2f2 !important;
        }

        .correct-icon,
        .wrong-icon {
            display: none;
        }

        .correct-answer .correct-icon {
            display: block;
        }

        .wrong-answer .wrong-icon {
            display: block;
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-slate-800 dark:text-gray-200 min-h-screen flex flex-col">
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <main class="flex-grow w-full max-w-4xl mx-auto px-4 py-10">
        <!-- Breadcrumb -->
        <div class="mb-6">
            <div
                class="inline-flex items-center px-4 py-1.5 rounded-full bg-purple-50 border border-purple-100 dark:bg-purple-900/20 dark:border-purple-800 text-purple-600 text-xs font-bold uppercase tracking-wider gap-2">
                <a href="home.html" class="hover:underline hover:text-purple-700 transition-colors">TRANG CHỦ</a>
                <span class="opacity-60">/</span>
                <a href="practice.html" class="hover:underline hover:text-purple-700 transition-colors">THỰC HÀNH</a>
                <span class="opacity-60">/</span>
                <span>QUIZ 4</span>
            </div>
        </div>
        <!-- Quiz Intro -->
        <div class="text-center mb-10" id="quiz-intro">
            <h1 class="text-3xl md:text-4xl font-serif font-bold text-slate-900 dark:text-white mb-4">
                Chủ nghĩa duy vật lịch sử
            </h1>
            <p class="text-lg text-slate-600 dark:text-gray-400 max-w-2xl mx-auto">
                Hình thái kinh tế - xã hội: Cơ sở hạ tầng và Kiến trúc thượng tầng. <br>
                Hãy chọn đáp án đúng nhất cho 7 câu hỏi dưới đây.
            </p>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="space-y-8">
            <!-- Questions will be injected here by JS -->
        </div>

        <!-- Submit Action -->
        <div class="mt-12 flex justify-center pb-20">
            <button onclick="submitQuiz()" id="submit-btn"
                class="px-8 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                Nộp bài & Xem kết quả
            </button>
            <div id="result-actions" class="hidden flex gap-4">
                <button onclick="location.reload()"
                    class="px-6 py-3 border border-gray-300 hover:bg-gray-50 text-slate-700 font-bold rounded-xl transition-colors">
                    Làm lại
                </button>
                <a href="practice.html"
                    class="px-6 py-3 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-xl transition-colors">
                    Quay về Thực hành
                </a>
            </div>
        </div>

        <!-- Score Modal (Hidden initially) -->
        <div id="score-modal"
            class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity duration-300">
            <div
                class="bg-white dark:bg-gray-800 rounded-3xl p-8 max-w-md w-full shadow-2xl transform scale-90 transition-transform duration-300">
                <div class="text-center">
                    <div
                        class="size-20 bg-purple-50 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-600">
                        <span class="material-symbols-outlined text-4xl">emoji_events</span>
                    </div>
                    <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Kết quả của bạn</h2>
                    <div class="text-5xl font-black text-purple-600 mb-4" id="final-score">0/7</div>
                    <p class="text-slate-600 dark:text-gray-400 mb-8" id="feedback-text">Hãy xem lại các câu sai để hiểu
                        rõ hơn nhé!</p>
                    <button onclick="closeModal()"
                        class="w-full py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition-colors">
                        Xem chi tiết đáp án
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="js/load-components.js"></script>
    <script>
        const quizData = [
            {
                id: 1,
                question: "Theo quan điểm của C. Mác và Ph. Ăngghen, hoạt động nào là cơ sở của sự tồn tại và phát triển của xã hội loài người, và là tiền đề của mọi hoạt động lịch sử khác?",
                options: [
                    "A. Hoạt động chính trị.",
                    "B. Sản xuất vật chất.",
                    "C. Nghiên cứu khoa học.",
                    "D. Sáng tạo nghệ thuật."
                ],
                correct: 1, // Index of B
                explanation: "Giáo trình khẳng định sản xuất vật chất là cơ sở của sự tồn tại và phát triển xã hội loài người. Ph. Ăngghen đã chỉ ra một sự thật hiển nhiên là \"trước hết con người cần phải ăn, uống, ở và mặc, nghĩa là phải lao động, trước khi có thể đấu tranh để giành quyền thống trị, trước khi có thể hoạt động chính trị, tôn giáo, triết học\". Nếu xã hội ngừng lao động sản xuất thì sẽ diệt vong. (Nguồn: Chương 3, Mục I, 1)"
            },
            {
                id: 2,
                question: "Trong mối quan hệ giữa Cơ sở hạ tầng (kinh tế) và Kiến trúc thượng tầng (chính trị, văn hóa...), yếu tố nào giữ vai trò quyết định xét đến cùng?",
                options: [
                    "A. Kiến trúc thượng tầng quyết định Cơ sở hạ tầng.",
                    "B. Hai yếu tố tác động ngang nhau, không cái nào quyết định cái nào.",
                    "C. Cơ sở hạ tầng quyết định Kiến trúc thượng tầng.",
                    "D. Ý thức xã hội quyết định Cơ sở hạ tầng."
                ],
                correct: 2, // Index of C
                explanation: "Theo chủ nghĩa duy vật lịch sử, quan hệ vật chất quyết định quan hệ tinh thần; tính tất yếu kinh tế xét đến cùng quyết định tính tất yếu chính trị - xã hội. Cơ sở hạ tầng quyết định nguồn gốc, cơ cấu, tính chất và sự vận động phát triển của kiến trúc thượng tầng. Khi cơ sở kinh tế thay đổi thì toàn bộ kiến trúc thượng tầng đồ sộ cũng bị đảo lộn ít nhiều nhanh chóng. (Nguồn: Chương 3, Mục I, 3.b)"
            },
            {
                id: 3,
                question: "Khái niệm \"Kiến trúc thượng tầng\" dùng để chỉ điều gì?",
                options: [
                    "A. Toàn bộ hệ thống kết cấu hạ tầng kỹ thuật (đường sá, cầu cống, nhà cửa).",
                    "B. Toàn bộ những quan hệ sản xuất hợp thành cơ cấu kinh tế của xã hội.",
                    "C. Toàn bộ những quan điểm, tư tưởng xã hội cùng những thiết chế xã hội tương ứng hình thành trên một cơ sở hạ tầng nhất định.",
                    "D. Toàn bộ điều kiện tự nhiên và dân số của xã hội."
                ],
                correct: 2, // Index of C
                explanation: "Kiến trúc thượng tầng là toàn bộ những quan điểm tư tưởng về chính trị, pháp quyền, đạo đức, tôn giáo, nghệ thuật, triết học... cùng những thiết chế xã hội tương ứng như nhà nước, đảng phái, giáo hội, các đoàn thể... hình thành trên cơ sở hạ tầng. (Lưu ý: Đừng nhầm lẫn với cơ sở hạ tầng kỹ thuật trong xây dựng). (Nguồn: Chương 3, Mục I, 3.a)"
            },
            {
                id: 4,
                question: "Mối quan hệ giữa Tồn tại xã hội và Ý thức xã hội được khái quát như thế nào trong chủ nghĩa duy vật lịch sử?",
                options: [
                    "A. Ý thức xã hội quyết định tồn tại xã hội.",
                    "B. Tồn tại xã hội quyết định ý thức xã hội, nhưng ý thức xã hội có tính độc lập tương đối.",
                    "C. Tồn tại xã hội và ý thức xã hội phát triển song song và không tác động lẫn nhau.",
                    "D. Ý thức xã hội luôn luôn lạc hậu hơn tồn tại xã hội."
                ],
                correct: 1, // Index of B
                explanation: "C. Mác viết: \"Không phải ý thức của con người quyết định tồn tại của họ; trái lại, tồn tại xã hội của họ quyết định ý thức của họ\". Tuy nhiên, ý thức xã hội không thụ động mà có tính độc lập tương đối, thể hiện qua việc nó có thể lạc hậu hơn, vượt trước, có tính kế thừa và tác động ngược trở lại tồn tại xã hội. (Nguồn: Chương 3, Mục IV, 1.b và Mục IV, 3)"
            },
            {
                id: 5,
                question: "Tại sao trong xã hội, nhiều khi điều kiện kinh tế đã thay đổi nhưng những phong tục, tập quán, thói quen cũ vẫn tồn tại dai dẳng?",
                options: [
                    "A. Do tính kế thừa của ý thức xã hội.",
                    "B. Do ý thức xã hội có thể vượt trước tồn tại xã hội.",
                    "C. Do ý thức xã hội thường lạc hậu hơn tồn tại xã hội.",
                    "D. Do sự tác động của kiến trúc thượng tầng."
                ],
                correct: 2, // Index of C
                explanation: "Một trong những biểu hiện của tính độc lập tương đối là ý thức xã hội thường lạc hậu hơn tồn tại xã hội. Nhiều khi xã hội cũ đã mất đi, nhưng ý thức xã hội (truyền thống, thói quen, tập quán) do xã hội đó sản sinh ra vẫn tiếp tục tồn tại. V.I. Lênin từng nhận định: \"sức mạnh của tập quán ở hàng triệu và hàng chục triệu người là một sức mạnh ghê gớm nhất\". (Nguồn: Chương 3, Mục IV, 3)"
            },
            {
                id: 6,
                question: "Theo Ph. Ăngghen, sự tác động trở lại của nhà nước (quyền lực chính trị) đối với kinh tế (cơ sở hạ tầng) diễn ra theo những chiều hướng nào?",
                options: [
                    "A. Luôn luôn thúc đẩy kinh tế phát triển.",
                    "B. Luôn luôn kìm hãm kinh tế phát triển.",
                    "C. Chỉ có tác dụng bảo vệ an ninh trật tự, không ảnh hưởng đến kinh tế.",
                    "D. Nếu tác động cùng chiều sẽ thúc đẩy kinh tế; nếu tác động ngược chiều sẽ kìm hãm kinh tế."
                ],
                correct: 3, // Index of D
                explanation: "Ph. Ăngghen chỉ rõ tác động ngược lại của quyền lực nhà nước đối với kinh tế theo hai hướng cơ bản: nếu tác động cùng hướng với sự phát triển kinh tế sẽ thúc đẩy kinh tế phát triển nhanh hơn; nếu tác động ngược lại hướng phát triển kinh tế sẽ kìm hãm sự phát triển của kinh tế. (Nguồn: Chương 3, Mục I, 3.b)"
            },
            {
                id: 7,
                question: "Quan điểm \"Chính trị là sự biểu hiện tập trung của kinh tế\" là của ai và mang ý nghĩa gì?",
                options: [
                    "A. Của C. Mác, nhằm khẳng định chính trị không quan trọng bằng kinh tế.",
                    "B. Của V.I. Lênin, nhằm khẳng định kinh tế quyết định chính trị nhưng chính trị có vai trò hàng đầu trong việc giải quyết các vấn đề kinh tế.",
                    "C. Của Ph. Ăngghen, nhằm khẳng định chính trị và kinh tế là một.",
                    "D. Của Hồ Chí Minh, nhằm khẳng định vai trò của văn hóa."
                ],
                correct: 1, // Index of B
                explanation: "Quy luật về mối quan hệ biện chứng giữa cơ sở hạ tầng và kiến trúc thượng tầng là cơ sở khoa học để nhận thức mối quan hệ giữa kinh tế và chính trị. V.I. Lênin cho rằng: \"Chính trị là sự biểu hiện tập trung của kinh tế... Chính trị không thể không chiếm địa vị hàng đầu so với kinh tế\". Điều này có nghĩa là giải quyết các vấn đề kinh tế phải thông qua con đường chính trị, và chính trị đúng đắn là điều kiện tiên quyết để xây dựng kinh tế. (Nguồn: Chương 3, Mục I, 3.b)"
            }
        ];

        function renderQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = quizData.map((item, index) => `
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 md:p-8 shadow-soft border border-gray-100 dark:border-gray-700 question-block" id="question-${index}">
                    <div class="flex items-start gap-4 mb-6">
                        <span class="flex-shrink-0 size-8 bg-purple-50 text-purple-600 font-bold rounded-lg flex items-center justify-center text-sm">
                            ${index + 1}
                        </span>
                        <h3 class="text-lg font-bold text-slate-800 dark:text-white leading-relaxed pt-1">
                            ${item.question}
                        </h3>
                    </div>
                    <div class="space-y-3 pl-0 md:pl-12">
                        ${item.options.map((opt, optIndex) => `
                            <label class="cursor-pointer group block relative">
                                <input type="radio" name="q${index}" value="${optIndex}" class="peer sr-only">
                                <div class="p-4 rounded-xl border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all flex items-center gap-3">
                                    <div class="radio-circle w-5 h-5 rounded-full border-2 border-gray-300 dark:border-gray-500 relative flex items-center justify-center transition-colors">
                                        <div class="w-2.5 h-2.5 bg-white rounded-full opacity-0 transform scale-50 transition-all duration-200"></div>
                                    </div>
                                    <span class="text-slate-700 dark:text-gray-300 font-medium">${opt}</span>
                                    
                                    <!-- Icons for result -->
                                    <span class="material-symbols-outlined text-green-500 ml-auto correct-icon">check_circle</span>
                                    <span class="material-symbols-outlined text-red-500 ml-auto wrong-icon">cancel</span>
                                </div>
                            </label>
                        `).join('')}
                    </div>
                    <!-- Explanation (Hidden) -->
                    <div class="explanation hidden mt-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-xl border border-purple-100 dark:border-purple-800">
                        <div class="flex items-start gap-3">
                            <span class="material-symbols-outlined text-purple-600 mt-1">lightbulb</span>
                            <div>
                                <h4 class="font-bold text-purple-600 text-sm uppercase mb-1">Giải thích chi tiết</h4>
                                <p class="text-sm text-slate-700 dark:text-gray-300 leading-relaxed">
                                    ${item.explanation}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function submitQuiz() {
            let score = 0;
            let answered = 0;

            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                const questionBlock = document.getElementById(`question-${index}`);
                const explanation = questionBlock.querySelector('.explanation');
                const inputs = questionBlock.querySelectorAll(`input[name="q${index}"]`);

                // Disable inputs
                inputs.forEach(input => input.disabled = true);

                // Remove previous formatting
                questionBlock.querySelectorAll('label > div').forEach(div => {
                    div.classList.remove('correct-answer', 'wrong-answer');
                });

                if (selected) {
                    answered++;
                    const val = parseInt(selected.value);
                    const selectedDiv = selected.nextElementSibling;

                    if (val === item.correct) {
                        score++;
                        selectedDiv.classList.add('correct-answer');
                    } else {
                        selectedDiv.classList.add('wrong-answer');
                        // Highlight correct answer
                        const correctInput = questionBlock.querySelector(`input[value="${item.correct}"]`);
                        correctInput.nextElementSibling.classList.add('correct-answer');
                    }
                } else {
                    // If not answered, just highlight correct
                    const correctInput = questionBlock.querySelector(`input[value="${item.correct}"]`);
                    correctInput.nextElementSibling.classList.add('correct-answer');
                }

                // Show explanation
                explanation.classList.remove('hidden');
            });

            // Show Result
            const modal = document.getElementById('score-modal');
            const scoreDisplay = document.getElementById('final-score');
            const feedback = document.getElementById('feedback-text');
            const submitBtn = document.getElementById('submit-btn');
            const resultActions = document.getElementById('result-actions');

            scoreDisplay.innerText = `${score}/${quizData.length}`;

            if (score === quizData.length) {
                feedback.innerText = "Xuất sắc! Bạn đã nắm vững toàn bộ kiến thức!";
            } else if (score >= 5) {
                feedback.innerText = "Làm tốt lắm! Chỉ còn vài lỗi nhỏ thôi.";
            } else {
                feedback.innerText = "Cần cố gắng thêm nhé! Hãy xem lại kiến thức.";
            }

            // Animation
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('div').classList.remove('scale-90', 'scale-100');
                modal.querySelector('div').classList.add('scale-100');
            }, 10);

            // Change button area
            submitBtn.classList.add('hidden');
            resultActions.classList.remove('hidden');

            // Scroll to top to see modal clearly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closeModal() {
            const modal = document.getElementById('score-modal');
            modal.classList.add('opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', renderQuiz);
    </script>
</body>

</html>